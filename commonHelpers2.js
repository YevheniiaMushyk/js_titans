import"./assets/loader-d9109aeb.js";import{a as f,i as l}from"./assets/vendor-8cce9181.js";const H=document.querySelector(".header__button"),U=document.querySelector(".modal__button_close"),D=document.getElementById("header_modal");H.addEventListener("click",()=>{D.showModal()});U.addEventListener("click",()=>{D.close()});const v={quoteText:document.querySelector(".quote-card-text"),quoteAuthor:document.querySelector(".quote-card-author")},I="https://energyflow.b.goit.study/api/quote";async function N(e){try{const t=localStorage.getItem("quoteLocalData");if(t){const n=JSON.parse(t),i=E();if(n.date===i){C(n.author,n.quote);return}}const a=(await f.get(e)).data;if(a){const n={quote:a.quote,author:a.author,date:E()};localStorage.setItem("quoteLocalData",JSON.stringify(n)),C(n.author,n.quote)}}catch{v.quoteAuthor.textContent="Angry Developer",v.quoteText.textContent="Internet access is required to receive a quote.",l.error({title:"Error",message:"No internet connection"})}}function E(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return`${t}-${s}-${a}`}function C(e,t){v.quoteAuthor.textContent=e,v.quoteText.textContent=t}N(I);const F=document.querySelector(".exercises-search"),r={buttons:document.querySelector(".exercises-buttons"),musclesButton:document.querySelector('[data-filter="muscles"]'),bodypartButton:document.querySelector('[data-filter="bodypart"]'),equipmentButton:document.querySelector('[data-filter="equipment"]'),cardContainer:document.querySelector(".exercises-card-container"),pagination:document.querySelector("#pagination")},K=document.querySelector(".exercises-search-form"),Q=document.querySelector(".loader");let g=null;f.defaults.baseURL="https://energyflow.b.goit.study/api";const o={filter:"Muscles",page:1,perPage:12,totalPages:1,totalItems:0};async function M(){return w(!0),(await f.get("/filters",{params:{filter:o.filter,page:o.page,limit:o.perPage}})).data}function O(e){r.cardContainer.innerHTML="";const t=e.map(({name:s,filter:a,imgUrl:n})=>`<li class="card-item">
        <a href="">
        <img class="card-image" src="${n}" alt="Card Image">
            <ul class="card-item-desc"="${s}">
                <li class="name" data-source="${s}">${s}</li>
                <li class="filter" data-source="${a}">${a}</li>
            </ul>
        </a>
    </li>`).join("");r.cardContainer.innerHTML=t,w(!1)}r.bodypartButton.addEventListener("click",()=>{o.page=1,b()});function b(){M().then(e=>{const{results:t,page:s,totalPages:a}=e;if(o.totalPages=a,O(t),a>1){const n=J(s,a);r.pagination.innerHTML=n,document.querySelector(".pag-btn").classList.add("active"),o.filter!=="Body parts"?r.pagination.style.display="block":r.pagination.style.display="none"}else r.pagination.style.display="none"}).catch(e=>{Y(e.message,"ERROR")}).finally(()=>{w(!1)})}b();r.musclesButton.classList.add("active");r.buttons.addEventListener("click",e=>{j(e);const t=e.target;F.classList.add("hidden"),t!==e.currentTarget&&(t===r.musclesButton?o.filter="Muscles":t===r.bodypartButton?o.filter="Body parts":t===r.equipmentButton&&(o.filter="Equipment"),o.page=1,b())});function j(e){const t=e.target.nodeName==="BUTTON";r.musclesButton.classList.remove("active"),t&&(e.target.classList.add("active"),g!==null&&g.classList.remove("active"),g=e.target,g!==null&&g.classList.add("active"))}r.pagination.addEventListener("click",W);function J(e,t){let s="";for(;e<=t;e++)s+=`<button class="pag-btn" type="button">${e}</button>`;return s}async function W(e){document.querySelectorAll(".pag-btn").forEach(s=>{s.classList.remove("active")}),e.target.classList.add("active"),o.page=e.target.textContent,r.cardContainer.innerHTML="";try{const{results:s}=await M();O(s)}catch(s){console.log(s)}}function w(e=!0){Q.style.display=e?"inline-block":"none",K.disabled=e}function Y(e,t="info"){t==="OK"?l.success({position:"topCenter",message:e}):t==="ERROR"?l.error({position:"topCenter",message:e}):l.info({position:"topCenter",message:e})}let z="https://energyflow.b.goit.study/api/exercises/";const R=document.querySelector(".exercises-search-form"),c=document.querySelector(".exercises-card-container"),G=document.querySelector(".exercises-search"),m={name:"",page:1,maxPage:0,limit:9};let V="";function T(){c.innerHTML='<div class="no-results-text">Unfortunately, <span>no results</span> were found.You may want to consider other search options to find the exercise you are looking for.Our range is wide and you have the opportunity to find more options that suit your needs.</div>'}c.addEventListener("click",X);async function X(e){e.preventDefault();const t=e.target.closest(".card-item");if(t){const s=t.querySelector(".name"),a=t.querySelector(".filter");if(s&&a){const n=s.textContent.trim().replace(/\s/g,"%20");let i=a.textContent.trim().toLowerCase().replace(/\s/g,"");i==="bodyparts"&&(i=i.replace(/s$/,""));try{const u=`${z}?${i}=${n}`,{results:q,totalPages:_}=await B("",1,u);G.classList.toggle("hidden"),R.addEventListener("submit",S);async function S(y){y.preventDefault(),c.innerHTML="";const h=y.currentTarget,d=h.elements.exercises.value.trim();if(V=d,m.page=1,d===""||d==null){T();return}try{const{results:p,totalPages:A}=await B(d,1,u);p&&p.length>0?(m.maxPage=Math.ceil(A/m.perpage),k(p,c),c.querySelectorAll(".exercises-title").forEach(function(L){L.scrollWidth>L.clientWidth&&L.classList.add("with-ellipsis")})):(c.innerHTML="",T())}catch(p){console.log(p)}finally{h.reset()}}m.maxPage=Math.ceil(_/m.perpage),k(q,c)}catch(u){console.log(u)}finally{R.reset()}}}}function B(e,t=1,s){return f.get(s,{params:{keyword:e,limit:9,page:t}}).then(a=>a.data)}function k(e,t){const s=e.map(({rating:a,name:n,burnedCalories:i,bodyPart:u,target:q,gifUrl:_,description:S,equipment:y,popularity:h,_id:d})=>`
    <li class="exercises-item" data-gifUrl=${_} data-description="${S}" data-equipment=${y} data-popularity=${h} data-id=${d}>
            <div class="exercises-sub-title">
                <div class="exercises__workout-rating"><p class="exercises-workout">workout</p>
                    <span class="exercises-rating"><span class="exercises-rating__text">${String(a).padEnd(3,".0")}</span><svg class="exercises-rating__svg" width="18" height="18">
                            <use href="../img/icons.svg#icon-star_yellow"></use>
                        </svg></span>
                </div>
                <a href="#" class="exercises-start"><span class="exercises-start__text">Start</span><svg
                        class="exercises-start__svg" width="13" height="13">
                        <use href="../img/icons.svg#icon-arrow"></use>
                    </svg></a>
            </div>
            <div class="exercises-title">
                <svg class="exercises-title__svg" width="24" height="24">
                    <use href="../img/icons.svg#icon-fav_run_man"></use>
                </svg>
                <span class="exercises-title-text">${n}</span>
            </div>
            <div class="exercises-text">
                <p class="exercises-text__content"><span class="exercises-text__static">Burned calories:</span>
                    <span class="exercises-text__dynamic">${i} / 3 min</span></p>
                <p class="exercises-text__content"><span class="exercises-text__static">Body part:</span>
                    <span class="exercises-text__dynamic">${u}</span></p>
                <p class="exercises-text__content"><span class="exercises-text__static">Target:</span>
                    <span class="exercises-text__dynamic">${q}</span></p>
            </div>
    </li>`).join("");t.innerHTML=s}const $=document.querySelector(".footer-form"),Z=document.querySelector(".loader");async function ee(e){return f.post("https://energyflow.b.goit.study/api/subscription",e)}$.addEventListener("submit",te);function te(e){e.preventDefault();const t=e.currentTarget.email.value.trim().toLowerCase();if(t===""){x("The email field is empty!","ERROR");return}const s={email:t};P("true"),ee(s).then(({data:a,status:n})=>{n===201&&x(a.message,"OK")}).catch(a=>{a.response.status===409?x("Subscription already exists!"):x(a.message,"ERROR")}).finally(()=>{$.reset(),P(!1)})}function x(e,t="info"){t==="OK"?l.success({position:"topCenter",message:e}):t==="ERROR"?l.error({position:"topCenter",message:e}):l.info({position:"topCenter",message:e})}function P(e=!0){Z.style.display=e?"inline-block":"none",$.disabled=e}
//# sourceMappingURL=commonHelpers2.js.map
