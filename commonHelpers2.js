import"./assets/loader-dec2596a.js";import{i as c,a as p}from"./assets/vendor-8cce9181.js";const k=document.querySelector(".header__button"),B=document.querySelector(".modal__button_close"),x=document.querySelector(".modal");k.addEventListener("click",()=>{x.showModal()});B.addEventListener("click",()=>{x.close()});const D=document.getElementById("modal_rating"),_=document.querySelector(".modal_rating_close"),d=document.querySelector(".modal_rating"),v=document.querySelectorAll(".fa-solid"),l=document.querySelector(".modal_rating_digit"),y=document.querySelector(".modal_rating_form");let i=0,$="",R="",g=0;const P="64f389465ae26083f39b19d8";D.addEventListener("click",()=>{i=0,l.textContent=`${i}.0`,d.showModal()});_.addEventListener("click",()=>{i=0,l.textContent=`${i}.0`,y.reset(),d.close()});d.addEventListener("click",t=>{t.target===t.currentTarget&&(i=0,l.textContent=`${i}.0`,y.reset(),d.close())});const O=()=>{l.textContent=`${i}.0`};for(let t=0;t<v.length;t++){const e=v[t];e.addEventListener("mouseenter",()=>{const o=e.dataset.rating;l.textContent=`${o}.0`}),e.addEventListener("mouseleave",O),e.addEventListener("click",()=>{g=e.dataset.rating,i=g,l.textContent=`${g}.0`})}y.addEventListener("submit",A);function A(t){t.preventDefault();const e=t.currentTarget;$=e.elements.email.value,R=e.elements.coment.value,i===0?c.error({message:"Please enter your raiting",position:"topCenter",backgroundColor:"#FF6666"}):M().then(()=>{d.close(),c.info({message:"Thank you for your feedback",position:"topCenter"})}).catch(()=>{c.error({message:"Something wrong. Please try again later!",position:"topCenter"})}).finally(()=>{i=0,l.textContent=`${i}.0`,y.reset()})}function M(){let t={};t.rate=parseInt(g),t.email=$,t.review=R;const e={method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=UTF-8"}};return fetch(`https://energyflow.b.goit.study/api/exercises/${P}/rating`,e).then(o=>{if(!o.ok)throw new Error(o.status);return o.json()})}const f={quoteText:document.querySelector(".quote-card-text"),quoteAuthor:document.querySelector(".quote-card-author")},I="https://energyflow.b.goit.study/api/quote";async function N(t){try{const e=localStorage.getItem("quoteLocalData");if(e){const r=JSON.parse(e),S=C();if(r.date===S){L(r.author,r.quote);return}}const n=(await p.get(t)).data;if(n){const r={quote:n.quote,author:n.author,date:C()};localStorage.setItem("quoteLocalData",JSON.stringify(r)),L(r.author,r.quote)}}catch{f.quoteAuthor.textContent="Angry Developer",f.quoteText.textContent="Internet access is required to receive a quote.",c.error({title:"Error",message:"No internet connection"})}}function C(){const t=new Date,e=String(t.getDate()).padStart(2,"0"),o=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return`${e}-${o}-${n}`}function L(t,e){f.quoteAuthor.textContent=t,f.quoteText.textContent=e}N(I);const a={buttons:document.querySelector(".exercises-buttons"),musclesButton:document.querySelector('[data-filter="muscles"]'),bodypartButton:document.querySelector('[data-filter="bodypart"]'),equipmentButton:document.querySelector('[data-filter="equipment"]'),cardContainer:document.querySelector(".exercises-card-container"),pagination:document.querySelector("#pagination")},F=document.querySelector(".exercises-search-form"),H=document.querySelector(".loader");let u=null;p.defaults.baseURL="https://energyflow.b.goit.study/api";const s={filter:"Muscles",page:1,perPage:12,totalPages:1,totalItems:0};async function T(){return q(!0),(await p.get("/filters",{params:{filter:s.filter,page:s.page,limit:s.perPage}})).data}function w(t){a.cardContainer.innerHTML="";const e=t.map(({name:o,filter:n,imgUrl:r})=>`<li class="card-item">
        <a href="">
        <img class="card-image" src="${r}" alt="Card Image">
            <ul class="card-item-desc"="${o}">
                <li class="name" data-source="${o}">${o}</li>
                <li class="filter" data-source="${n}">${n}</li>
            </ul>
        </a>
    </li>`).join("");a.cardContainer.innerHTML=e,q(!1)}a.bodypartButton.addEventListener("click",()=>{s.page=1,h()});function h(){T().then(t=>{const{results:e,page:o,totalPages:n}=t;if(s.totalPages=n,w(e),n>1){const r=j(o,n);a.pagination.innerHTML=r,document.querySelector(".pag-btn").classList.add("active"),s.filter!=="Body parts"?a.pagination.style.display="block":a.pagination.style.display="none"}else a.pagination.style.display="none"}).catch(t=>{K(t.message,"ERROR")}).finally(()=>{q(!1)})}h();a.musclesButton.classList.add("active");a.buttons.addEventListener("click",t=>{U(t);const e=t.target;e!==t.currentTarget&&(e===a.musclesButton?s.filter="Muscles":e===a.bodypartButton?s.filter="Body parts":e===a.equipmentButton&&(s.filter="Equipment"),s.page=1,h())});function U(t){const e=t.target.nodeName==="BUTTON";a.musclesButton.classList.remove("active"),e&&(t.target.classList.add("active"),u!==null&&u.classList.remove("active"),u=t.target,u!==null&&u.classList.add("active"))}a.pagination.addEventListener("click",J);function j(t,e){let o="";for(;t<=e;t++)o+=`<button class="pag-btn" type="button">${t}</button>`;return o}async function J(t){document.querySelectorAll(".pag-btn").forEach(o=>{o.classList.remove("active")}),t.target.classList.add("active"),s.page=t.target.textContent,a.cardContainer.innerHTML="";try{const{results:o}=await T();w(o)}catch(o){console.log(o)}}function q(t=!0){H.style.display=t?"inline-block":"none",F.disabled=t}function K(t,e="info"){e==="OK"?c.success({position:"topCenter",message:t}):e==="ERROR"?c.error({position:"topCenter",message:t}):c.info({position:"topCenter",message:t})}const b=document.querySelector(".footer-form"),Q=document.querySelector(".loader");async function z(t){return p.post("https://energyflow.b.goit.study/api/subscription",t)}b.addEventListener("submit",V);function V(t){t.preventDefault();const e=t.currentTarget.email.value.trim().toLowerCase();if(e===""){m("The email field is empty!","ERROR");return}const o={email:e};E("true"),z(o).then(({data:n,status:r})=>{r===201&&m(n.message,"OK")}).catch(n=>{n.response.status===409?m("Subscription already exists!"):m(n.message,"ERROR")}).finally(()=>{b.reset(),E(!1)})}function m(t,e="info"){e==="OK"?c.success({position:"topCenter",message:t}):e==="ERROR"?c.error({position:"topCenter",message:t}):c.info({position:"topCenter",message:t})}function E(t=!0){Q.style.display=t?"inline-block":"none",b.disabled=t}
//# sourceMappingURL=commonHelpers2.js.map
