import{o as H}from"./assets/loader-755c105b.js";import{a as f,i as u}from"./assets/vendor-8cce9181.js";const I=document.querySelector(".header__button"),N=document.querySelector(".modal__button_close"),k=document.getElementById("header_modal");I.addEventListener("click",()=>{k.showModal()});N.addEventListener("click",()=>{k.close()});const v={quoteText:document.querySelector(".quote-card-text"),quoteAuthor:document.querySelector(".quote-card-author")},U="https://energyflow.b.goit.study/api/quote";async function F(e){try{const t=localStorage.getItem("quoteLocalData");if(t){const r=JSON.parse(t),o=E();if(r.date===o){$(r.author,r.quote);return}}const a=(await f.get(e)).data;if(a){const r={quote:a.quote,author:a.author,date:E()};localStorage.setItem("quoteLocalData",JSON.stringify(r)),$(r.author,r.quote)}}catch{v.quoteAuthor.textContent="Angry Developer",v.quoteText.textContent="Internet access is required to receive a quote.",u.error({title:"Error",message:"No internet connection"})}}function E(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return`${t}-${s}-${a}`}function $(e,t){v.quoteAuthor.textContent=e,v.quoteText.textContent=t}F(U);const K=document.querySelector(".exercises-search"),n={buttons:document.querySelector(".exercises-buttons"),musclesButton:document.querySelector('[data-filter="muscles"]'),bodypartButton:document.querySelector('[data-filter="bodypart"]'),equipmentButton:document.querySelector('[data-filter="equipment"]'),cardContainer:document.querySelector(".exercises-card-container"),pagination:document.querySelector("#pagination")};document.querySelector(".exercises-search-form");let g=null;f.defaults.baseURL="https://energyflow.b.goit.study/api";const i={filter:"Muscles",page:1,perPage:12,totalPages:1,totalItems:0};async function M(){return b(".exercises-card-container","add"),(await f.get("/filters",{params:{filter:i.filter,page:i.page,limit:i.perPage}})).data}function D(e){n.cardContainer.innerHTML="";const t=e.map(({name:s,filter:a,imgUrl:r})=>new Promise(o=>{const c=new Image;c.src=r,c.onload=()=>{o(`<li class="card-item">
          <a href="">
            <img class="card-image" src="${r}" alt="Card Image">
            <ul class="card-item-desc"="${s}">
              <li class="name" data-source="${s}">${s}</li>
              <li class="filter" data-source="${a}">${a}</li>
            </ul>
          </a>
        </li>`)}}));Promise.all(t).then(s=>{const a=s.join("");n.cardContainer.innerHTML=a,b(".exercises-card-container","add")})}function A(){M().then(e=>{const{results:t,page:s,totalPages:a}=e;if(i.totalPages=a,b(".exercises-card-container","del"),D(t),a>1){const r=j(s,a);n.pagination.innerHTML=r,document.querySelector(".pag-btn").classList.add("active"),i.filter!=="Body parts"?n.pagination.style.display="block":n.pagination.style.display="none"}else n.pagination.style.display="none"}).catch(e=>{W(e.message,"ERROR")}).finally(()=>{})}A();n.musclesButton.classList.add("active");n.buttons.addEventListener("click",e=>{Q(e);const t=e.target;K.classList.add("hidden"),t!==e.currentTarget&&(t===n.musclesButton?i.filter="Muscles":t===n.bodypartButton?i.filter="Body parts":t===n.equipmentButton&&(i.filter="Equipment"),i.page=1,A())});function Q(e){const t=e.target.nodeName==="BUTTON";n.musclesButton.classList.remove("active"),t&&(e.target.classList.add("active"),g!==null&&g.classList.remove("active"),g=e.target,g!==null&&g.classList.add("active"))}n.pagination.addEventListener("click",J);function j(e,t){let s="";for(;e<=t;e++)s+=`<button class="pag-btn" type="button">${e}</button>`;return s}async function J(e){document.querySelectorAll(".pag-btn").forEach(s=>{s.classList.remove("active")}),e.target.classList.add("active"),i.page=e.target.textContent,n.cardContainer.innerHTML="";try{const{results:s}=await M();D(s)}catch(s){console.log(s)}}function b(e,t){const s=document.querySelector(e),a=s.getBoundingClientRect();a.height>100&&t==="add"&&(s.setAttribute("style","height:"+a.height+"px"),s.style.height=a.height+"px"),t==="del"&&(s.removeAttribute("style"),s.style.height="auto")}function W(e,t="info"){t==="OK"?u.success({position:"topCenter",message:e}):t==="ERROR"?u.error({position:"topCenter",message:e}):u.info({position:"topCenter",message:e})}let Y="https://energyflow.b.goit.study/api/exercises/";const C=document.querySelector(".exercises-search-form"),l=document.querySelector(".exercises-card-container"),z=document.querySelector(".exercises-search"),G=document.querySelector(".exercises-name"),m={name:"",page:1,maxPage:0,limit:9};let V="";function R(){l.innerHTML='<div class="no-results-text">Unfortunately, <span>no results</span> were found.You may want to consider other search options to find the exercise you are looking for.Our range is wide and you have the opportunity to find more options that suit your needs.</div>'}l.addEventListener("click",X);async function X(e){e.preventDefault();const t=e.target.closest(".card-item");if(t){const s=t.querySelector(".name"),a=t.querySelector(".filter");if(s&&a){const r=s.textContent.trim().replace(/\s/g,"%20");let o=a.textContent.trim().toLowerCase().replace(/\s/g,"");o==="bodyparts"&&(o=o.replace(/s$/,"")),G.innerHTML=`Exercises /<span> ${r.replace(/%20/g," ")}</span>`;try{const c=`${Y}?${o}=${r}`,{results:q,totalPages:S}=await T("",1,c);z.classList.toggle("hidden"),C.addEventListener("submit",_);async function _(h){h.preventDefault(),l.innerHTML="";const y=h.currentTarget,d=y.elements.exercises.value.trim();if(V=d,m.page=1,d===""||d==null){R();return}try{const{results:p,totalPages:O}=await T(d,1,c);p&&p.length>0?(m.maxPage=Math.ceil(O/m.perpage),B(p,l),l.querySelectorAll(".exercises-title").forEach(function(L){L.scrollWidth>L.clientWidth&&L.classList.add("with-ellipsis")})):(l.innerHTML="",R())}catch(p){console.log(p)}finally{y.reset()}}m.maxPage=Math.ceil(S/m.perpage),B(q,l)}catch(c){console.log(c)}finally{C.reset()}}}}function T(e,t=1,s){return f.get(s,{params:{keyword:e,limit:9,page:t}}).then(a=>a.data)}function B(e,t){const s=e.map(({rating:a,name:r,burnedCalories:o,bodyPart:c,target:q,gifUrl:S,description:_,equipment:h,popularity:y,_id:d})=>`
    <li class="exercises-item" data-gifUrl=${S} data-description="${_}" data-equipment=${h} data-popularity=${y} data-id=${d}>
            <div class="exercises-sub-title">
                <div class="exercises__workout-rating"><p class="exercises-workout">workout</p>
                    <span class="exercises-rating"><span class="exercises-rating__text">${String(a).padEnd(3,".0")}</span><svg class="exercises-rating__svg" width="18" height="18">
                            <use href="../img/icons.svg#icon-star_yellow"></use>
                        </svg></span>
                </div>
                <div class="exercises-start"><span class="exercises-start__text">Start</span><svg
                        class="exercises-start__svg" width="13" height="13">
                        <use href="../img/icons.svg#icon-arrow"></use>
                    </svg></div>
            </div>
            <div class="exercises-title">
                <svg class="exercises-title__svg" width="24" height="24">
                    <use href="../img/icons.svg#icon-fav_run_man"></use>
                </svg>
                <span class="exercises-title-text">${r}</span>
            </div>
            <div class="exercises-text">
                <p class="exercises-text__content"><span class="exercises-text__static">Burned calories:</span>
                    <span class="exercises-text__dynamic">${o} / 3 min</span></p>
                <p class="exercises-text__content"><span class="exercises-text__static">Body part:</span>
                    <span class="exercises-text__dynamic">${c}</span></p>
                <p class="exercises-text__content"><span class="exercises-text__static">Target:</span>
                    <span class="exercises-text__dynamic">${q}</span></p>
            </div>
    </li>`).join("");t.innerHTML=s,document.querySelectorAll(".exercises-start").forEach(a=>a.addEventListener("click",H))}const w=document.querySelector(".footer-form"),Z=document.querySelector(".loader");async function ee(e){return f.post("https://energyflow.b.goit.study/api/subscription",e)}w.addEventListener("submit",te);function te(e){e.preventDefault();const t=e.currentTarget.email.value.trim().toLowerCase();if(t===""){x("The email field is empty!","ERROR");return}const s={email:t};P("true"),ee(s).then(({data:a,status:r})=>{r===201&&x(a.message,"OK")}).catch(a=>{a.response.status===409?x("Subscription already exists!"):x(a.message,"ERROR")}).finally(()=>{w.reset(),P(!1)})}function x(e,t="info"){t==="OK"?u.success({position:"topCenter",message:e}):t==="ERROR"?u.error({position:"topCenter",message:e}):u.info({position:"topCenter",message:e})}function P(e=!0){Z.style.display=e?"inline-block":"none",w.disabled=e}
//# sourceMappingURL=commonHelpers2.js.map
