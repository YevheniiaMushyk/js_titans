import"./assets/loader-e5ab1058.js";import{a as E,i as u}from"./assets/vendor-8cce9181.js";const ne=document.querySelector(".header__button"),se=document.querySelector(".modal__button_close"),K=document.querySelector(".modal");ne.addEventListener("click",()=>{K.showModal()});se.addEventListener("click",()=>{K.close()});let oe="https://energyflow.b.goit.study/api/exercises/";const A=document.querySelector(".exercises-search-form"),g=document.querySelector(".exercises-card-container"),re=document.querySelector(".exercises-search"),q={name:"",page:1,maxPage:0,limit:9};let ae="";function M(){g.innerHTML='<div class="no-results-text">Unfortunately, <span>no results</span> were found.You may want to consider other search options to find the exercise you are looking for.Our range is wide and you have the opportunity to find more options that suit your needs.</div>'}g.addEventListener("click",ie);async function ie(e){e.preventDefault();const t=e.target.closest(".card-item");if(t){const n=t.querySelector(".name"),s=t.querySelector(".filter");if(n&&s){const r=n.textContent.trim().replace(/\s/g,"%20");let i=s.textContent.trim().toLowerCase().replace(/\s/g,"");i==="bodyparts"&&(i=i.replace(/s$/,""));try{const d=`${oe}?${i}=${r}`,{results:y,totalPages:x}=await F("",1,d);re.classList.toggle("hidden"),A.addEventListener("submit",h);async function h(f){f.preventDefault(),g.innerHTML="";const w=f.currentTarget,p=w.elements.exercises.value.trim();if(ae=p,q.page=1,p===""||p==null){M();return}try{const{results:v,totalPages:te}=await F(p,1,d);v&&v.length>0?(q.maxPage=Math.ceil(te/q.perpage),D(v,g),g.querySelectorAll(".exercises-title").forEach(function(k){k.scrollWidth>k.clientWidth&&k.classList.add("with-ellipsis")})):(g.innerHTML="",M())}catch(v){console.log(v)}finally{w.reset()}}q.maxPage=Math.ceil(x/q.perpage),D(y,g)}catch(d){console.log(d)}finally{A.reset()}}}}function F(e,t=1,n){return E.get(n,{params:{keyword:e,limit:9,page:t}}).then(s=>s.data)}function D(e,t){const n=e.map(({rating:s,name:r,burnedCalories:i,bodyPart:d,target:y,gifUrl:x,description:h,equipment:f,popularity:w,_id:p})=>`
    <li class="exercises-item" data-gifUrl=${x} data-description="${h}" data-equipment=${f} data-popularity=${w} data-id=${p}>
            <div class="exercises-sub-title">
                <div class="exercises__workout-rating"><p class="exercises-workout">workout</p>
                    <span class="exercises-rating"><span class="exercises-rating__text">${String(s).padEnd(3,".0")}</span><svg class="exercises-rating__svg" width="18" height="18">
                            <use href="../img/icons.svg#icon-star_yellow"></use>
                        </svg></span>
                </div>
                <a href="#" class="exercises-start"><span class="exercises-start__text">Start</span><svg
                        class="exercises-start__svg" width="13" height="13">
                        <use href="../img/icons.svg#icon-arrow"></use>
                    </svg></a>
            </div>
            <div class="exercises-title">
                <svg class="exercises-title__svg" width="24" height="24">
                    <use href="../img/icons.svg#icon-fav_run_man"></use>
                </svg>
                <span class="exercises-title-text">${r}</span>
            </div>
            <div class="exercises-text">
                <p class="exercises-text__content"><span class="exercises-text__static">Burned calories:</span>
                    <span class="exercises-text__dynamic">${i} / 3 min</span></p>
                <p class="exercises-text__content"><span class="exercises-text__static">Body part:</span>
                    <span class="exercises-text__dynamic">${d}</span></p>
                <p class="exercises-text__content"><span class="exercises-text__static">Target:</span>
                    <span class="exercises-text__dynamic">${y}</span></p>
            </div>
    </li>`).join("");t.innerHTML=n}const o=document.getElementById("modal");o.querySelector(".modal-content");const ce=o.querySelector(".close"),U=o.querySelector(".exercise-gif"),le=o.querySelector(".exercise-title"),ue=o.querySelectorAll(".exercise-star"),de=o.querySelector(".exercise-target"),ge=o.querySelector(".exercise-bodyparts"),me=o.querySelector(".exercise-equipment"),fe=o.querySelector(".exercise-popular"),pe=o.querySelector(".exercise-calories"),ye=o.querySelector(".exercise-description"),Q=o.querySelector(".favorite-button"),xe=document.querySelector(".rating-button"),he=document.querySelector(".workouts-list"),H=document.querySelector(".modal_rating"),T="asdasdasdasdqweqweqwewerterterter123";g.addEventListener("click",e=>{const t=e.target.closest(".exercises-item");if(!t)return;const n=V(t);z(n),o.style.display="block"});he.addEventListener("click",e=>{const t=e.target.closest(".exercises-item");if(!t)return;const n=V(t);z(n),o.style.display="block"});ce.addEventListener("click",()=>{o.style.display="none"});window.addEventListener("click",e=>{e.target===o&&(o.style.display="none")});window.addEventListener("keydown",e=>{e.key==="Escape"&&(o.style.display="none")});window.addEventListener("click",e=>{xe&&H&&(H.dataset.id=o.dataset.id)});function R(){const e=window.localStorage.getItem(T);return e&&e!=="undefined"?JSON.parse(e):[]}function ve(e){const t=R(),n=t.length?[...t,e]:[e];window.localStorage.setItem(T,JSON.stringify(n))}function W(e){const t=R();return console.log(t),!!t.find(n=>n===e)}function Y(e){const n=W(e)?"Remove from":"Add to favorites";Q.innerHTML=`${n} 
  <svg class="modal_icon" width="13" height="15"> 
  <use href="./img/icons.svg#icon-heart"></use> 
  </svg>`}function qe(e){const n=R().filter(s=>s!==e);window.localStorage.setItem(T,JSON.stringify(n))}Q.addEventListener("click",e=>{if(!o)return;const t=o.dataset.id;W(t)?qe(t):ve(t),Y(t)});function V(e){const t=e.querySelector(".exercises-title-text"),n=e.querySelector(".exercises-text__dynamic"),s=e.querySelectorAll(".exercises-text__dynamic")[1],r=e.querySelectorAll(".exercises-text__dynamic")[2],i=e.querySelector(".exercises-rating__text"),{gifurl:d,description:y,equipment:x,popularity:h,id:f}=e.dataset;return{title:t.textContent,burnedCalories:n.textContent,bodyPart:s.textContent,target:r.textContent,rating:i.textContent,gifUrl:d,description:y,equipment:x,popularity:h,_id:f}}function z(e){U.src=e.gifUrl,U.alt=e.title;const t=parseFloat(e.rating);ue.forEach((n,s)=>{s<t?n.style.fill="rgb(255, 195, 0)":n.style.fill="none"}),le.textContent=e.title,de.textContent=e.target,ge.textContent=e.bodyPart,me.textContent=e.equipment,fe.textContent=e.popularity,pe.textContent=e.burnedCalories,ye.textContent=e.description,o.dataset.id=e.id,Y(e.id)}const Se=document.getElementById("modal_rating"),_e=document.querySelector(".modal_rating_close"),_=document.querySelector(".modal_rating"),I=document.querySelectorAll(".fa-solid"),m=document.querySelector(".modal_rating_digit"),$=document.querySelector(".modal_rating_form");let l=0,G="",X="",C=0;const Ee="64f389465ae26083f39b19d8";Se.addEventListener("click",()=>{l=0,m.textContent=`${l}.0`,_.showModal()});_e.addEventListener("click",()=>{l=0,m.textContent=`${l}.0`,$.reset(),_.close()});_.addEventListener("click",e=>{e.target===e.currentTarget&&(l=0,m.textContent=`${l}.0`,$.reset(),_.close())});const we=()=>{m.textContent=`${l}.0`};for(let e=0;e<I.length;e++){const t=I[e];t.addEventListener("mouseenter",()=>{const n=t.dataset.rating;m.textContent=`${n}.0`}),t.addEventListener("mouseleave",we),t.addEventListener("click",()=>{C=t.dataset.rating,l=C,m.textContent=`${C}.0`})}$.addEventListener("submit",be);function be(e){e.preventDefault(),console.log(o.dataset.id);const t=e.currentTarget;G=t.elements.email.value,X=t.elements.coment.value,l===0?u.error({message:"Please enter your raiting",position:"topCenter",backgroundColor:"#FF6666"}):Ce().then(()=>{_.close(),u.info({message:"Thank you for your feedback",position:"topCenter"})}).catch(()=>{u.error({message:"Something wrong. Please try again later!",position:"topCenter"})}).finally(()=>{l=0,m.textContent=`${l}.0`,$.reset()})}function Ce(){let e={};e.rate=parseInt(C),e.email=G,e.review=X;const t={method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}};return fetch(`https://energyflow.b.goit.study/api/exercises/${Ee}/rating`,t).then(n=>{if(!n.ok)throw new Error(n.status);return n.json()})}const L={quoteText:document.querySelector(".quote-card-text"),quoteAuthor:document.querySelector(".quote-card-author")},Le="https://energyflow.b.goit.study/api/quote";async function $e(e){try{const t=localStorage.getItem("quoteLocalData");if(t){const r=JSON.parse(t),i=N();if(r.date===i){J(r.author,r.quote);return}}const s=(await E.get(e)).data;if(s){const r={quote:s.quote,author:s.author,date:N()};localStorage.setItem("quoteLocalData",JSON.stringify(r)),J(r.author,r.quote)}}catch{L.quoteAuthor.textContent="Angry Developer",L.quoteText.textContent="Internet access is required to receive a quote.",u.error({title:"Error",message:"No internet connection"})}}function N(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return`${t}-${n}-${s}`}function J(e,t){L.quoteAuthor.textContent=e,L.quoteText.textContent=t}$e(Le);const ke=document.querySelector(".exercises-search"),a={buttons:document.querySelector(".exercises-buttons"),musclesButton:document.querySelector('[data-filter="muscles"]'),bodypartButton:document.querySelector('[data-filter="bodypart"]'),equipmentButton:document.querySelector('[data-filter="equipment"]'),cardContainer:document.querySelector(".exercises-card-container"),pagination:document.querySelector("#pagination")},Te=document.querySelector(".exercises-search-form"),Re=document.querySelector(".loader");let S=null;E.defaults.baseURL="https://energyflow.b.goit.study/api";const c={filter:"Muscles",page:1,perPage:12,totalPages:1,totalItems:0};async function Z(){return P(!0),(await E.get("/filters",{params:{filter:c.filter,page:c.page,limit:c.perPage}})).data}function ee(e){a.cardContainer.innerHTML="";const t=e.map(({name:n,filter:s,imgUrl:r})=>`<li class="card-item">
        <a href="">
        <img class="card-image" src="${r}" alt="Card Image">
            <ul class="card-item-desc"="${n}">
                <li class="name" data-source="${n}">${n}</li>
                <li class="filter" data-source="${s}">${s}</li>
            </ul>
        </a>
    </li>`).join("");a.cardContainer.innerHTML=t,P(!1)}a.bodypartButton.addEventListener("click",()=>{c.page=1,B()});function B(){Z().then(e=>{const{results:t,page:n,totalPages:s}=e;if(c.totalPages=s,ee(t),s>1){const r=Pe(n,s);a.pagination.innerHTML=r,document.querySelector(".pag-btn").classList.add("active"),c.filter!=="Body parts"?a.pagination.style.display="block":a.pagination.style.display="none"}else a.pagination.style.display="none"}).catch(e=>{Ae(e.message,"ERROR")}).finally(()=>{P(!1)})}B();a.musclesButton.classList.add("active");a.buttons.addEventListener("click",e=>{Be(e);const t=e.target;ke.classList.add("hidden"),t!==e.currentTarget&&(t===a.musclesButton?c.filter="Muscles":t===a.bodypartButton?c.filter="Body parts":t===a.equipmentButton&&(c.filter="Equipment"),c.page=1,B())});function Be(e){const t=e.target.nodeName==="BUTTON";a.musclesButton.classList.remove("active"),t&&(e.target.classList.add("active"),S!==null&&S.classList.remove("active"),S=e.target,S!==null&&S.classList.add("active"))}a.pagination.addEventListener("click",Oe);function Pe(e,t){let n="";for(;e<=t;e++)n+=`<button class="pag-btn" type="button">${e}</button>`;return n}async function Oe(e){document.querySelectorAll(".pag-btn").forEach(n=>{n.classList.remove("active")}),e.target.classList.add("active"),c.page=e.target.textContent,a.cardContainer.innerHTML="";try{const{results:n}=await Z();ee(n)}catch(n){console.log(n)}}function P(e=!0){Re.style.display=e?"inline-block":"none",Te.disabled=e}function Ae(e,t="info"){t==="OK"?u.success({position:"topCenter",message:e}):t==="ERROR"?u.error({position:"topCenter",message:e}):u.info({position:"topCenter",message:e})}const O=document.querySelector(".footer-form"),Me=document.querySelector(".loader");async function Fe(e){return E.post("https://energyflow.b.goit.study/api/subscription",e)}O.addEventListener("submit",De);function De(e){e.preventDefault();const t=e.currentTarget.email.value.trim().toLowerCase();if(t===""){b("The email field is empty!","ERROR");return}const n={email:t};j("true"),Fe(n).then(({data:s,status:r})=>{r===201&&b(s.message,"OK")}).catch(s=>{s.response.status===409?b("Subscription already exists!"):b(s.message,"ERROR")}).finally(()=>{O.reset(),j(!1)})}function b(e,t="info"){t==="OK"?u.success({position:"topCenter",message:e}):t==="ERROR"?u.error({position:"topCenter",message:e}):u.info({position:"topCenter",message:e})}function j(e=!0){Me.style.display=e?"inline-block":"none",O.disabled=e}
//# sourceMappingURL=commonHelpers2.js.map
