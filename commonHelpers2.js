import{a as f,l as i,d as v,o as z,m as G}from"./assets/scroll_to_top-56a707de.js";import{a as q,i as d}from"./assets/vendor-8cce9181.js";const X=document.querySelector(".header__button"),Z=document.querySelector(".modal__button_close"),N=document.getElementById("header_modal");X.addEventListener("click",()=>{N.showModal()});Z.addEventListener("click",()=>{N.close()});const E={quoteText:document.querySelector(".quote-card-text"),quoteAuthor:document.querySelector(".quote-card-author")},ee="https://energyflow.b.goit.study/api/quote";async function te(e){try{f(i);const t=localStorage.getItem("quoteLocalData");if(t){const n=JSON.parse(t),o=D();if(n.date===o){M(n.author,n.quote);return}}const a=(await q.get(e)).data;if(a){const n={quote:a.quote,author:a.author,date:D()};localStorage.setItem("quoteLocalData",JSON.stringify(n)),M(n.author,n.quote)}}catch{E.quoteAuthor.textContent="Angry Developer",E.quoteText.textContent="Internet access is required to receive a quote.",d.error({title:"Error",message:"No internet connection"})}}function D(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return`${t}-${s}-${a}`}function M(e,t){v(i),E.quoteAuthor.textContent=e,E.quoteText.textContent=t}te(ee);const se=document.querySelector(".exercises-search"),r={buttons:document.querySelector(".exercises-buttons"),musclesButton:document.querySelector('[data-filter="muscles"]'),bodypartButton:document.querySelector('[data-filter="bodypart"]'),equipmentButton:document.querySelector('[data-filter="equipment"]'),cardContainer:document.querySelector(".exercises-card-container"),pagination:document.querySelector("#pagination")};document.querySelector(".exercises-search-form");let y=null;q.defaults.baseURL="https://energyflow.b.goit.study/api";const l={filter:"Muscles",page:1,perPage:12,totalPages:1,totalItems:0};async function j(){return B(".exercises-card-container","add"),(await q.get("/filters",{params:{filter:l.filter,page:l.page,limit:l.perPage}})).data}function J(e){r.cardContainer.innerHTML="";const t=e.map(({name:s,filter:a,imgUrl:n})=>new Promise(o=>{const u=new Image;u.src=n,u.onload=()=>{o(`<li class="card-item">
          <a href="">
            <img class="card-image" src="${n}" alt="Card Image">
            <ul class="card-item-desc"="${s}">
              <li class="name" data-source="${s}">${s}</li>
              <li class="filter" data-source="${a}">${a}</li>
            </ul>
          </a>
        </li>`)}}));Promise.all(t).then(s=>{const a=s.join("");r.cardContainer.innerHTML=a,B(".exercises-card-container","add"),v(i)})}function K(){f(i),j().then(e=>{const{results:t,page:s,totalPages:a}=e;if(l.totalPages=a,B(".exercises-card-container","del"),J(t),a>1){const n=ne(s,a);r.pagination.innerHTML=n,document.querySelector(".pag-btn").classList.add("active"),l.filter!=="Body parts"?r.pagination.style.display="block":r.pagination.style.display="none"}else r.pagination.style.display="none"}).catch(e=>{oe(e.message,"ERROR")}).finally(()=>{})}K();r.musclesButton.classList.add("active");r.buttons.addEventListener("click",e=>{ae(e);const t=e.target;se.classList.add("hidden"),t!==e.currentTarget&&(t===r.musclesButton?l.filter="Muscles":t===r.bodypartButton?l.filter="Body parts":t===r.equipmentButton&&(l.filter="Equipment"),l.page=1,K())});function ae(e){const t=e.target.nodeName==="BUTTON";r.musclesButton.classList.remove("active"),t&&(e.target.classList.add("active"),y!==null&&y.classList.remove("active"),y=e.target,y!==null&&y.classList.add("active"))}r.pagination.addEventListener("click",re);function ne(e,t){let s="";for(;e<=t;e++)s+=`<button class="pag-btn" type="button">${e}</button>`;return s}async function re(e){document.querySelectorAll(".pag-btn").forEach(s=>{s.classList.remove("active")}),e.target.classList.add("active"),l.page=e.target.textContent,r.cardContainer.innerHTML="";try{f(i);const{results:s}=await j();J(s)}catch(s){console.log(s)}}function B(e,t){const s=document.querySelector(e),a=s.getBoundingClientRect();a.height>100&&t==="add"&&(s.setAttribute("style","height:"+a.height+"px"),s.style.height=a.height+"px"),t==="del"&&(s.removeAttribute("style"),s.style.height="auto")}function oe(e,t="info"){t==="OK"?d.success({position:"topCenter",message:e}):t==="ERROR"?d.error({position:"topCenter",message:e}):d.info({position:"topCenter",message:e})}let ie="https://energyflow.b.goit.study/api/exercises/";const A=document.querySelector(".exercises-search-form"),m=document.querySelector(".exercises-card-container"),ce=document.querySelector(".exercises-search"),le=document.querySelector(".exercises-name"),x={name:"",page:1,maxPage:0,limit:9};let de="";function O(){m.innerHTML='<div class="no-results-text">Unfortunately, <span>no results</span> were found.You may want to consider other search options to find the exercise you are looking for.Our range is wide and you have the opportunity to find more options that suit your needs.</div>'}m.addEventListener("click",ue);async function ue(e){e.preventDefault();const t=e.target.closest(".card-item");if(t){f(i);const s=t.querySelector(".name"),a=t.querySelector(".filter");if(s&&a){const n=s.textContent.trim().replace(/\s/g,"%20");let o=a.textContent.trim().toLowerCase().replace(/\s/g,"");o==="bodyparts"&&(o=o.replace(/s$/,"")),le.innerHTML=`Exercises /<span> ${n.replace(/%20/g," ")}</span>`;try{const u=`${ie}?${o}=${n}`,{results:T,totalPages:R}=await H("",1,u);ce.classList.toggle("hidden"),A.addEventListener("submit",k);async function k(L){f(i),L.preventDefault(),m.innerHTML="";const S=L.currentTarget,p=S.elements.exercises.value.trim();if(de=p,x.page=1,p===""||p==null){O();return}try{const{results:h,totalPages:Y}=await H(p,1,u);h&&h.length>0?(x.maxPage=Math.ceil(Y/x.perpage),I(h,m),m.querySelectorAll(".exercises-title").forEach(function(P){P.scrollWidth>P.clientWidth&&P.classList.add("with-ellipsis")})):(m.innerHTML="",O())}catch(h){console.log(h)}finally{S.reset(),v(i)}}x.maxPage=Math.ceil(R/x.perpage),I(T,m)}catch(u){console.log(u)}finally{A.reset(),v(i)}}}}function H(e,t=1,s){return q.get(s,{params:{keyword:e,limit:9,page:t}}).then(a=>a.data)}function I(e,t){const s=e.map(({rating:a,name:n,burnedCalories:o,bodyPart:u,target:T,gifUrl:R,description:k,equipment:L,popularity:S,_id:p})=>`
    <li class="exercises-item" data-gifUrl=${R} data-description="${k}" data-equipment=${L} data-popularity=${S} data-id=${p}>
            <div class="exercises-sub-title">
                <div class="exercises__workout-rating"><p class="exercises-workout">workout</p>
                    <span class="exercises-rating"><span class="exercises-rating__text">${String(a).padEnd(3,".0")}</span><svg class="exercises-rating__svg" width="18" height="18">
                            <use href="./img/icons.svg#icon-star_yellow"></use>
                        </svg></span>
                </div>
                <div class="exercises-start"><span class="exercises-start__text">Start</span><svg
                        class="exercises-start__svg" width="13" height="13">
                        <use href="./img/icons.svg#icon-arrow"></use>
                    </svg></div>
            </div>
            <div class="exercises-title">
                <svg class="exercises-title__svg" width="24" height="24">
                    <use href="./img/icons.svg#icon-fav_run_man"></use>
                </svg>
                <span class="exercises-title-text">${n}</span>
            </div>
            <div class="exercises-text">
                <p class="exercises-text__content"><span class="exercises-text__static">Burned calories:</span>
                    <span class="exercises-text__dynamic">${o} / 3 min</span></p>
                <p class="exercises-text__content"><span class="exercises-text__static">Body part:</span>
                    <span class="exercises-text__dynamic">${u}</span></p>
                <p class="exercises-text__content"><span class="exercises-text__static">Target:</span>
                    <span class="exercises-text__dynamic">${T}</span></p>
            </div>
    </li>`).join("");t.innerHTML=s,document.querySelectorAll(".exercises-start").forEach(a=>a.addEventListener("click",z))}const me=document.getElementById("modal_rating"),b=document.getElementById("modal"),ge=document.querySelector(".modal_rating_close"),_=document.querySelector(".modal_rating_window"),U=document.querySelectorAll(".fa-solid"),g=document.querySelector(".modal_rating_digit"),$=document.querySelector(".modal_rating_form");let c=0,Q="",W="",C=0,F="";me.addEventListener("click",()=>{c=0,g.textContent=`${c}.0`,b.classList.add("disactive_video_window"),_.showModal()});ge.addEventListener("click",()=>{c=0,g.textContent=`${c}.0`,$.reset(),_.close(),b.classList.remove("disactive_video_window")});_.addEventListener("click",e=>{e.target===e.currentTarget&&(c=0,g.textContent=`${c}.0`,$.reset(),_.close(),b.classList.remove("disactive_video_window"))});const pe=()=>{g.textContent=`${c}.0`};for(let e=0;e<U.length;e++){const t=U[e];t.addEventListener("mouseenter",()=>{const s=t.dataset.rating;g.textContent=`${s}.0`}),t.addEventListener("mouseleave",pe),t.addEventListener("click",()=>{C=t.dataset.rating,c=C,g.textContent=`${C}.0`})}$.addEventListener("submit",fe);function fe(e){e.preventDefault();const t=e.currentTarget;Q=t.elements.email.value,W=t.elements.coment.value,c===0?d.error({message:"Please enter your raiting",position:"topCenter",backgroundColor:"#FF6666"}):he().then(()=>{_.close(),b.classList.remove("disactive_video_window"),d.info({message:"Thank you for your feedback",position:"topCenter"})}).catch(()=>{d.error({message:"Something wrong. Please try again later!",position:"topCenter"})}).finally(()=>{c=0,g.textContent=`${c}.0`,$.reset()})}function he(){let e={};e.rate=parseInt(C),e.email=Q,e.review=W,F=G.dataset.id;const t={method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}};return fetch(`https://energyflow.b.goit.study/api/exercises/${F}/rating`,t).then(s=>{if(!s.ok)throw new Error(s.status);return s.json()})}const V=document.querySelector(".footer-form");async function ye(e){return q.post("https://energyflow.b.goit.study/api/subscription",e)}V.addEventListener("submit",xe);function xe(e){e.preventDefault();const t=e.currentTarget.email.value.trim().toLowerCase();if(t===""){w("The email field is empty!","ERROR");return}const s={email:t};f(i),ye(s).then(({data:a,status:n})=>{n===201&&w(a.message,"OK")}).catch(a=>{a.response.status===409?w("Subscription already exists!"):w(a.message,"ERROR")}).finally(()=>{V.reset(),v(i)})}function w(e,t="info"){t==="OK"?d.success({position:"topCenter",message:e}):t==="ERROR"?d.error({position:"topCenter",message:e}):d.info({position:"topCenter",message:e})}
//# sourceMappingURL=commonHelpers2.js.map
